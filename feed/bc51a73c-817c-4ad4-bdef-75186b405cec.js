define({id:"bc51a73c-817c-4ad4-bdef-75186b405cec",title:"总结CSS3新特性(Animation篇)",postDate:"2015-08-03 17:00",content:"<p>动画(Animation),是CSS3的亮点.\/\/之一</p><p>通过animation属性指定@keyframe来完成关键帧动画;</p><h2>@keyframe用法:　　</h2><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">@keyframes name </span>{<span style=\"color: #ff0000;\">  0% { top</span>:<span style=\"color: #0000ff;\"> 0</span>; }<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">0%可用from关键字替代</span><span style=\"color: #008000;\">*/</span><span style=\"color: #800000;\">  50% </span>{<span style=\"color: #ff0000;\"> top</span>:<span style=\"color: #0000ff;\"> 10px</span>; }<span style=\"color: #800000;\">  100% </span>{<span style=\"color: #ff0000;\"> top</span>:<span style=\"color: #0000ff;\"> 0</span>; }<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">100%可用to关键字替代</span><span style=\"color: #008000;\">*/</span><span style=\"color: #800000;\">}</span></pre></div><p>由于是CSS3,所以不出意外的各种前缀:</p><p><img src=\"http:\/\/images0.cnblogs.com/blog2015/731575/201508/031528187517503.png\" alt=\"\" />--图片来自MDN,<a href=\"https:\/\/developer.mozilla.org/zh-CN/docs/Web/CSS/%40keyframes\" target=\"_blank\">CSS中的关键帧</a></p><p>单个帧中可填写多个属性,而且不需要保证一致,如:</p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">@-webkit-keyframes identifier </span>{<span style=\"color: #ff0000;\">  from { top</span>:<span style=\"color: #0000ff;\"> 0</span>; }<span style=\"color: #800000;\">  50% </span>{<span style=\"color: #ff0000;\"> top</span>:<span style=\"color: #0000ff;\"> 10px</span>;<span style=\"color: #ff0000;\">background-color</span>:<span style=\"color: #0000ff;\">red</span>; }<span style=\"color: #800000;\">  to </span>{<span style=\"color: #ff0000;\"> top</span>:<span style=\"color: #0000ff;\"> 20px</span>;<span style=\"color: #ff0000;\">color</span>:<span style=\"color: #0000ff;\">red</span>; }<span style=\"color: #800000;\"> }</span><span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">这是一个完全有效的关键帧定义</span><span style=\"color: #008000;\">*/</span></pre></div><p>需要注意的有几点:</p><p>　　关键帧中有效的属性为<a href=\"https:\/\/developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties\" target=\"_blank\">可动画属性</a>;如出现不可动画属性,会忽略该属性,不影响其余属性的动画,</p><p>　　如属性后跟有 !important,则会忽略该属性,</p><p>　　某个关键帧如果重复定义,则取后定义的帧,　　</p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">@-webkit-keyframes identifier </span>{<span style=\"color: #ff0000;\"> from { top</span>:<span style=\"color: #0000ff;\"> 0</span>; }<span style=\"color: #800000;\">  50% </span>{<span style=\"color: #ff0000;\">    top</span>:<span style=\"color: #0000ff;\"> 10px</span>; <span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">该属性会动画</span><span style=\"color: #008000;\">*/</span><span style=\"color: #ff0000;\">    background-color</span>:<span style=\"color: #0000ff;\">red !important</span>; <span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">因为有!important字样,所以该条将被忽略</span><span style=\"color: #008000;\">*/</span><span style=\"color: #ff0000;\">    text-align</span>:<span style=\"color: #0000ff;\">center</span>; <span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">由于该属性不为可动画属性,因此也被忽略</span><span style=\"color: #008000;\">*/</span>}<span style=\"color: #800000;\">  to </span>{<span style=\"color: #ff0000;\"> top</span>:<span style=\"color: #0000ff;\"> 20px</span>;<span style=\"color: #ff0000;\">color</span>:<span style=\"color: #0000ff;\">red</span>; }<span style=\"color: #800000;\">   100% </span>{<span style=\"color: #ff0000;\">color</span>:<span style=\"color: #0000ff;\">green</span>; } <span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">由于to关键字表示100%,所以该动画只会执行改变颜色为green,而to所对应的属性全部被忽略</span><span style=\"color: #008000;\">*/</span><span style=\"color: #800000;\">}</span></pre></div><p>帧数范围为0%-100%,不属于这个范围的则被忽略(经实验,关键帧定义可以不按顺序来,可以正确执行,但是可读性不太好);</p><h2>Animation用法:</h2><p><span style=\"color: #000000;\">animation-name</span>:设置动画的名称,就是@keyframe后跟的标识;</p><p><span style=\"line-height: 1.5;\">animation-duration:设置动画花费的时间,\/\/这两个为必填属性,第一个不解释了,第二个必填的原因为默认值是0s,0s是不会产生动画效果的,所以为必填;</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">    animation-name</span>:<span style=\"color: #0000ff;\">demo</span>;<span style=\"color: #ff0000;\">    animation-duration</span>:<span style=\"color: #0000ff;\">2s</span>;}<span style=\"color: #800000;\">@keyframe demo </span>{<span style=\"color: #ff0000;\">    from {top</span>:<span style=\"color: #0000ff;\">0</span>;}<span style=\"color: #800000;\">    to </span>{<span style=\"color: #ff0000;\">top</span>:<span style=\"color: #0000ff;\">20px</span>;}<span style=\"color: #800000;\">}</span></pre></div><p> </p><p><span style=\"line-height: 1.5;\">animation-timing-function:设置动画的速度曲线,默认值为 ease,</span><a style=\"line-height: 1.5;\" href=\"http:\/\/www.w3school.com.cn/cssref/pr_animation-timing-function.asp\" target=\"_blank\">可选值</a><span style=\"line-height: 1.5;\">有数个,可通过</span><span style=\"color: #00ccff;\">cubic-bezier</span><span style=\"line-height: 1.5;\">函数来自定义,这里有一些定义好的,可以直接拿来用的函数,</span><a style=\"line-height: 1.5;\" href=\"http:\/\/easings.net/zh-cn\" target=\"_blank\">传送阵</a><span style=\"line-height: 1.5;\">;</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">    animation-function</span>:<span style=\"color: #0000ff;\"> cubic-bezier(0.25,0.1,0.25,1)</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">自定义的贝塞尔曲线</span><span style=\"color: #008000;\">*/</span>}</pre></div><p><span style=\"line-height: 1.5;\">animation-delay:设置动画开始前的等待时间,默认为0s;</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">    animation-delay</span>:<span style=\"color: #0000ff;\">2s</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">动画将于2s后执行</span><span style=\"color: #008000;\">*/</span>}</pre></div><p><span style=\"line-height: 1.5;\">animation-iteration-count:设置动画执行次数,默认为1,使用 </span><span style=\"color: #00ccff;\">infinite</span><span style=\"line-height: 1.5;\"> 关键字可以使动画无限循环;</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">animation-iteration-count</span>:<span style=\"color: #0000ff;\">infinite</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">动画将无限循环,此时animation-fill-mode将无效</span><span style=\"color: #008000;\">*/</span>}</pre></div><p><span style=\"line-height: 1.5;\">animation-direction:设置动画执行完后时候倒序执行,默认为</span><span style=\"color: #00ccff;\">normal</span><span style=\"line-height: 1.5;\">,使用 </span><span style=\"color: #00ccff;\">alternate</span><span style=\"line-height: 1.5;\"> 关键字开启倒序执行</span></p><p><span style=\"line-height: 1.5;\">　　\/\/仅有</span><span style=\"color: #00ccff;\">animation-iteration-count</span><span style=\"line-height: 1.5;\">值为大于1次</span><span style=\"line-height: 1.5;\">时才会激活,倒序执行消耗时间为</span><span style=\"color: #00ccff;\">animation-duration</span><span style=\"line-height: 1.5;\">设置的时间,奇数次数为正序,偶数次数为倒序;</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">animation-direction</span>:<span style=\"color: #0000ff;\">alternate</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">激活倒序播放</span><span style=\"color: #008000;\">*/</span><span style=\"color: #ff0000;\">animation-iteration-count</span>:<span style=\"color: #0000ff;\">2</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">此时该属性须大于1,direction才会有效</span><span style=\"color: #008000;\">*/</span>}</pre></div><p><span style=\"line-height: 1.5;\">animation-play-state:设置动画当前状态,默认是 </span><span style=\"color: #00ccff;\">running</span><span style=\"line-height: 1.5;\"> ,为执行状态,可以设置为 </span><span style=\"color: #00ccff;\">paused</span><span style=\"line-height: 1.5;\"> 为暂停,</span></p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">#demo </span>{<span style=\"color: #ff0000;\">animation-play-state</span>:<span style=\"color: #0000ff;\">paused</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">默认不触发动画</span><span style=\"color: #008000;\">*/</span>}<span style=\"color: #800000;\">#demo:hover </span>{<span style=\"color: #ff0000;\">animation-play-state</span>:<span style=\"color: #0000ff;\">running</span>;<span style=\"color: #008000;\">/*</span><span style=\"color: #008000;\">悬浮至该元素才执行动画</span><span style=\"color: #008000;\">*/</span>}</pre></div><p><span style=\"line-height: 1.5;\">animation-fill-mode:设置动画执行完后的状态(复原(</span><span style=\"color: #00ccff;\">none</span><span style=\"line-height: 1.5;\">),保持第一帧(</span><span style=\"color: #00ccff;\">backwards</span><span style=\"line-height: 1.5;\">)以及保持最后一帧(</span><span style=\"color: #00ccff;\">forwards</span><span style=\"line-height: 1.5;\">),还有一个</span><span style=\"color: #00ccff;\">both</span><span style=\"line-height: 1.5;\">值 MDN说是同时</span><span style=\"color: #00ccff;\">backwards</span><span style=\"line-height: 1.5;\">和</span><span style=\"color: #00ccff;\">forwards</span><span style=\"line-height: 1.5;\">,原谅我没有试出它与</span><span style=\"color: #00ccff;\">forwards</span><span style=\"line-height: 1.5;\">的区别...,)</span></p><p>　　\/\/设置<span style=\"color: #00ccff;\">animation-iteration-count</span>值为<span style=\"color: #00ccff;\">infinite</span>时将导致该属性失效;<span style=\"color: #00ccff;\"><br /></span></p><p>animation的简写方式对顺序要求特别严格,规格如下:</p><p>animation:<span style=\"color: #00ccff;\">name duration timing-function delay iteration-count direction play-state fill-mode</span>;</p><h2>使用时需注意:</h2><p>各种前缀...@keyframe里边如果用到了transform,也是需要加前缀的,如:</p><div class=\"cnblogs_code\"><pre><span style=\"color: #800000;\">@-webkit-keyframe demo </span>{<span style=\"color: #ff0000;\">    from {-webkit-transform</span>:<span style=\"color: #0000ff;\">rotate(7deg)</span>;}<span style=\"color: #800000;\">      to </span>{<span style=\"color: #ff0000;\">-webkit-transform</span>:<span style=\"color: #0000ff;\">rotate(14deg)</span>;}<span style=\"color: #800000;\">  }</span></pre></div><h2>部分参考文档:</h2><p><a href=\"https:\/\/developer.mozilla.org/zh-CN/docs/Web/CSS/animation\" target=\"_blank\">MDN的动画</a></p><p><a href=\"https:\/\/developer.mozilla.org/zh-CN/docs/Web/CSS/%40keyframes\" target=\"_blank\">CSS3中的关键帧</a></p><p><a href=\"http:\/\/www.w3school.com.cn/cssref/pr_animation.asp\" target=\"_blank\">W3School的Animation属性</a></p><p><a href=\"http:\/\/www.w3school.com.cn/cssref/pr_keyframes.asp\" target=\"_blank\">W3School的@Keyframe规则</a></p>"});